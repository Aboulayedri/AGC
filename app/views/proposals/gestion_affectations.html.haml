.page-header
  %h1 
    Propositions
    = Time.now.next_week.strftime("S%W %Y")
%h2 Les consultants disponibles
%table.table.table-striped
  %thead
    %tr
      %th Consultant
      %th Nombre de jours
      %th Entité
      %th Actions
  %tbody
    - @propositions_disponibles.each do |proposal|
      %tr
        %td= link_to proposal.consultant.name, "#modal"+proposal.consultant_id.to_s, "data-toggle" => 'modal'
        %td= proposal.nbre_jour
        %td= proposal.consultant.entity.name
        %td
          =# link_to "Consulter", proposal, :class => 'btn btn-mini'
          = link_to "Reserver", reserver_proposal_path(proposal), :class => 'btn btn-mini'
%h2 Les consultants reservés
%table.table.table-striped
  %thead
    %tr
      %th Consultant
      %th Projet
      %th Nombre de jours
      %th Entité
      %th Actions
  %tbody
    - @propositions_reservees.each do |proposal|
      %tr
        %td= link_to proposal.consultant.name, "#modal"+proposal.consultant_id.to_s, "data-toggle" => 'modal'
        %td= proposal.project.name
        %td= proposal.nbre_jour
        %td= proposal.consultant.entity.name
        %td
          =# link_to "Consulter", proposal, :class => 'btn btn-mini'
          = link_to "Liberer", liberer_proposal_path(proposal), :class => 'btn btn-mini'
          = link_to "Valider", valider_proposal_path(proposal), :class => 'btn btn-mini'
%h2 Les consultants sortants
%table.table.table-striped
  %thead
    %tr
      %th Consultant
      %th Entité
      %th Dernier projet
      %th Actions
  %tbody
    - @propositions_sortantes.each do |proposal|
      %tr
        %td= link_to proposal.consultant.name, "#modal"+proposal.consultant_id.to_s, "data-toggle" => 'modal'
        %td= proposal.consultant.entity.name
        %td= proposal.project.name
- @propositions_disponibles.each do |proposal|
  - dialog_body = capture do
    %p
      %strong Niveau de diplôme :
      = proposal.consultant.niv_diplome
    %p
      %strong Nature du diplôme :
      = proposal.consultant.nat_diplome
    %p
      %strong Entité :
      = proposal.consultant.entity.name
  = modal_dialog id: "modal"+proposal.consultant_id.to_s,
  header: { title: proposal.consultant.name },
  body: dialog_body,
  footer: content_tag(:button, 'Fermer', class: 'btn', "data-dismiss" => "modal")
- @propositions_reservees.each do |proposal|
  - dialog_body = capture do
    %p
      %strong Niveau de diplôme :
      = proposal.consultant.niv_diplome
    %p
      %strong Nature du diplôme :
      = proposal.consultant.nat_diplome
    %p
      %strong Entité :
      = proposal.consultant.entity.name
  = modal_dialog id: "modal"+proposal.consultant_id.to_s,
  header: { title: proposal.consultant.name },
  body: dialog_body,
  footer: content_tag(:button, 'Fermer', class: 'btn', "data-dismiss" => "modal")
